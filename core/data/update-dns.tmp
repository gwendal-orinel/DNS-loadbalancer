;Generated by National7 tools
$TTL    30
@       IN      SOA     dev.n7.integ.dns-orange.fr. root.dev.n7.integ.dns-orange.fr. (
         {{timestamp "unix"}}         ; Serial
                       604800         ; Refresh
                        86400         ; Retry
                      2419200         ; Expire
                       604800 )       ; Negative Cache TTL
;
@       IN      NS      ns.dev.n7.integ.dns-orange.fr.

ns     IN      A       192.168.0.4


{{ range $key, services }}{{ $sname := .Name }}
;Active clients of {{ $sname }}
{{range service $sname}}{{ $stags := .Tags }}{{ if not (in $stags "passive") }}
{{ $sname }}   {{ if $stags }}{{ range $tag, $stags}}{{ if $tag | regexMatch "ttl+" }}{{ $tag | split "ttl " | join "" }}{{end}}{{end}}{{end}}     IN      A     {{.Address}}     ;on {{ with index .Checks 0 }}{{ .Node }}{{end}}{{end}}{{end}}

;Passive clients of {{ $sname }}
{{range service $sname "critical"}}{{ $name := .Name }}{{ $tags := .Tags }}{{ if in $tags "active" }}{{range service $name "passing"}}{{ $stags := .Tags }}{{ if in $stags "passive" }}
{{ $name }} {{ if $stags }}{{ range $tag, $stags}}{{ if $tag | regexMatch "ttl+" }}{{ $tag | split "ttl " | join "" }}{{end}}{{end}}{{end}}     IN      A     {{.Address}}      ;on {{ with index .Checks 0 }}{{ .Node }}{{end}}{{end}}{{end}}
{{end}}{{end}}

{{end}}
